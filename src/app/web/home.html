<!DOCTYPE html>
<html lang="en">
{{HEADER}}
<body>
    <div class="container">
        {{NAV}}

        <form id="config-form">
            <!-- Hello World and Sample Settings (2-column on desktop) -->
            <div class="grid-2col">
            <!-- Hello World Section -->
            <section class="section">
                <h2>üëã Hello World</h2>
                <p style="font-size: 16px; line-height: 1.6; color: #1d1d1f; margin-bottom: 16px;">
                    Welcome to your ESP32 device! This is a simple demonstration section.
                </p>
                <p style="font-size: 14px; color: #86868b; margin: 0;">
                    üí° <strong>Tip:</strong> You can modify this welcome message in <code style="background: #f5f5f7; padding: 2px 6px; border-radius: 4px; font-size: 13px;">src/app/web/home.html</code>
                </p>
            </section>

            <!-- Sample Settings Section -->
            <section class="section">
                <h2>‚öôÔ∏è Sample Settings</h2>
                <div class="form-group">
                    <label for="dummy_setting">Dummy Setting</label>
                    <input type="text" id="dummy_setting" name="dummy_setting" maxlength="63">
                    <small>Example setting for demonstration</small>
                </div>

                <hr style="border: none; border-top: 1px solid #e5e5ea; margin: 18px 0;">

                <h3 style="margin: 0 0 12px 0; font-size: 16px; color: #1d1d1f;">üì∏ Photo Cycle</h3>

                <div class="form-group">
                    <label for="sleep_timeout_seconds">Sleep Timeout (seconds)</label>
                    <input type="number" id="sleep_timeout_seconds" name="sleep_timeout_seconds" min="1" max="65535" placeholder="60">
                    <small>How long the device stays awake after showing an image.</small>
                </div>

                <div class="form-group">
                    <label for="image_selection_mode">Image Selection Mode</label>
                    <select id="image_selection_mode" name="image_selection_mode">
                        <option value="random">Random</option>
                        <option value="sequential">Sequential (sorted)</option>
                    </select>
                    <small>Sequential uses filename order. Random picks any image.</small>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="always_on" name="always_on">
                        Always-on mode (no deep sleep)
                    </label>
                    <small>Keeps the portal running and refreshes images on the timeout interval.</small>
                </div>
            </section>
            </div>

            <!-- SD Image Management (G4) -->
            <section class="section" id="sd-images-section">
                <h2>üñºÔ∏è SD Images (G4)</h2>

                <div class="form-group">
                    <label for="sd-image-file">Upload .g4 Image</label>
                    <input type="file" id="sd-image-file" accept=".g4" class="file-input">
                    <small>Max 2 MB. Upload overwrites on name conflict.</small>
                </div>
                <button type="button" id="sd-image-upload-btn" class="btn btn-primary" disabled>Upload</button>

                <hr style="border: none; border-top: 1px solid #e5e5ea; margin: 18px 0;">

                <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px;">
                    <div>
                        <h3 style="margin: 0; font-size: 16px; color: #1d1d1f;">Stored Images</h3>
                        <small>Click Display to show immediately.</small>
                    </div>
                    <button type="button" id="sd-images-refresh" class="btn">Refresh</button>
                </div>

                <div id="sd-images-empty" style="display:none; margin-top: 12px; color: #666;">No .g4 images found.</div>
                <div id="sd-images-list" style="margin-top: 12px;"></div>
            </section>

            <!-- Display Settings Section (hidden if no backlight support) -->
            <section class="section" id="display-settings-section" style="display:none;">
                <h2>üñ•Ô∏è Display Settings</h2>
                <div class="form-group">
                    <label for="backlight_brightness">
                        Backlight Brightness: <span id="brightness-value">100</span>%
                    </label>
                    <input type="range" id="backlight_brightness" name="backlight_brightness" 
                           min="0" max="100" value="100" 
                           style="width: 100%; height: 8px; border-radius: 4px; background: linear-gradient(to right, #007aff 0%, #007aff 100%, #e5e5e5 100%, #e5e5e5 100%);">
                    <small>Brightness adjusts immediately. Click Save to persist across reboots.</small>
                </div>

                <hr style="border: none; border-top: 1px solid #e5e5ea; margin: 18px 0;">

                <h3 style="margin: 0 0 12px 0; font-size: 16px; color: #1d1d1f;">Screen Saver (Burn-in Prevention)</h3>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="screen_saver_enabled" name="screen_saver_enabled">
                        Enable screen saver (turn off backlight when idle)
                    </label>
                    <small>When enabled, the backlight will fade out after inactivity.</small>
                </div>

                <div class="form-group">
                    <label for="screen_saver_timeout_seconds">Idle Timeout (seconds)</label>
                    <input type="number" id="screen_saver_timeout_seconds" name="screen_saver_timeout_seconds" min="0" max="65535" placeholder="300">
                    <small>0 disables automatic sleep. Example: 300 = 5 minutes.</small>
                </div>

                <div class="grid-2col">
                    <section class="section" style="padding: 0; background: transparent; box-shadow: none;">
                        <div class="form-group">
                            <label for="screen_saver_fade_out_ms">Fade Out (ms)</label>
                            <input type="number" id="screen_saver_fade_out_ms" name="screen_saver_fade_out_ms" min="0" max="60000" placeholder="800">
                            <small>0 = instant off</small>
                        </div>
                    </section>
                    <section class="section" style="padding: 0; background: transparent; box-shadow: none;">
                        <div class="form-group">
                            <label for="screen_saver_fade_in_ms">Fade In (ms)</label>
                            <input type="number" id="screen_saver_fade_in_ms" name="screen_saver_fade_in_ms" min="0" max="60000" placeholder="400">
                            <small>0 = instant on</small>
                        </div>
                    </section>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="screen_saver_wake_on_touch" name="screen_saver_wake_on_touch">
                        Wake on touch press
                    </label>
                    <small>Only applies to touch-enabled boards.</small>
                </div>

                <div class="form-group" id="screen-selection-group" style="display:none;">
                    <label for="screen_selection">
                        Current Screen
                    </label>
                    <select id="screen_selection" name="screen_selection">
                        <!-- Options populated by JavaScript from /api/info -->
                    </select>
                    <small>Switch between screens instantly. Selection is not saved (resets on reboot).</small>
                </div>
            </section>

            {{FOOTER}}
        </form>
    </div>

    <script src="/portal.js"></script>
</body>
</html>
